{"version":3,"sources":["services/service.js","views/Reports/Reports_EmpLeaves.js"],"names":["MyApiUrl","ViewImg","table","placeholder","label","items","values","fields2","key","Reports_EmpLeaves","useState","ResponseData","setResponseData","ResponseData2","setResponseData2","React","useEffect","document","getElementById","className","axios","method","url","headers","then","response","data","map","item","index","status","EMPOLYEE_IS_MANAGER","EMPLOYEE_TYPE_NAME","EMPLOYEE_SUB_TYPE_NAME","HQ","HQ_NAME","Company","COMPANY_NAME","EMPLOYEE_NAME","catch","error","console","log","history","useHistory","id","style","marginTop","col","boxShadow","onClick","cnt","csvData","Array","push","ManagerType","LEAVE_ISACTIVE","idate","Date","LEAVE_FROM_DATE","toISOString","split","dateMDY","getDate","toString","padStart","getMonth","getFullYear","idate1","LEAVE_TO_DATE","dateMDY1","LeaveCount","LEAVE_TYPE","LEAVE_REASON","fileName","buffer","join","blob","Blob","type","link","createElement","undefined","download","setAttribute","window","URL","createObjectURL","body","appendChild","click","removeChild","navigator","msSaveBlob","color","size","fields","hover","striped","bordered","sorter","tableFilter","itemsPerPageSelect","columnFilterSlot","itemsPerPage","pagination","scopedSlots","i"],"mappings":"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","file":"static/js/138.222e2f4d.chunk.js","sourcesContent":["// Nodejs Api's\r\n// Local\r\n//  const MyApiUrl = 'http://192.168.1.7:7765/api/';\r\n\r\n//  const ViewImg = 'http://192.168.1.7:7765/';\r\n\r\n// Live\r\n // const MyApiUrl = 'https://ssieducation.in:7765/api/';\r\n\r\n  //const ViewImg = 'https://ssieducation.in:7765/'; \r\n\r\n  const MyApiUrl = 'https://zeusservices.onrender.com/api/';\r\n\r\n  const ViewImg = 'https://zeusservices.onrender.com/'; \r\n\r\nexport {\r\n    MyApiUrl,\r\n    ViewImg,\r\n}\r\n","/**\r\n * @author KIMOSABE\r\n * @email Kimosabe@mail.com\r\n * @create date 2021-11-29 12:14:40\r\n * @modify date 2021-12-06 15:20:08\r\n * @desc [description]\r\n */\r\n\r\nimport React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport {\r\n  CButton,\r\n  CCard,\r\n  CCardBody,\r\n  CCardHeader,\r\n  CCol,\r\n  CRow,\r\n  CDataTable,\r\n} from \"@coreui/react\";\r\nimport { MyApiUrl } from \"src/services/service\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"../../style.css\";\r\nconst table = { placeholder: \"Search here...\", label: \"Search:  \" };\r\nconst items = { label: \"Rows:\", values: [5, 10, 25, 50, 75, 100] };\r\nconst fields2 = [\r\n  { key: \"SL No\" },\r\n  { key: \"Employee Type\" },\r\n  { key: \"Sub Type\" },\r\n  { key: \"HQ\" },\r\n  { key: \"Company\" },\r\n  { key: \"Employee Name\" },\r\n  { key: \"Is Manager\" },\r\n  { key: \"Leave Count\" },\r\n];\r\n\r\nconst Reports_EmpLeaves = () => {\r\n  const [ResponseData, setResponseData] = useState([]);\r\n  const [ResponseData2, setResponseData2] = useState([]);\r\n\r\n  const GetAllEmpLeave = () => {\r\n    document.getElementById(\"divLoading\").className = \"show\";\r\n    axios({\r\n      method: \"GET\",\r\n      url: MyApiUrl + \"leavesforallemps\",\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((response) => {\r\n        const items = response.data.map((item, index) => {\r\n          let status = \"\";\r\n          if (item.EMPOLYEE_IS_MANAGER === 1) {\r\n            status = \"Manager\";\r\n          } else {\r\n            status = \"Officer\";\r\n          }\r\n          return {\r\n            ...item,\r\n            \"Employee Type\": item.EMPLOYEE_TYPE_NAME,\r\n            \"Sub Type\": item.EMPLOYEE_SUB_TYPE_NAME,\r\n            HQ: item.HQ_NAME,\r\n            Company: item.COMPANY_NAME,\r\n            \"SL No\": index + 1,\r\n            \"Employee Name\": item.EMPLOYEE_NAME,\r\n            \"Is Manager\": status,\r\n          };\r\n        });\r\n        setResponseData(items);\r\n        document.getElementById(\"divLoading\").className = \"hide\";\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n    axios({\r\n      method: \"GET\",\r\n      url: MyApiUrl + \"getallLeavesinfo\",\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((response) => {\r\n        setResponseData2(response.data);\r\n        document.getElementById(\"divLoading\").className = \"hide\";\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  const ToExcel = () => {\r\n    document.getElementById(\"divLoading\").className = \"show\";\r\n    var cnt = 0;\r\n    // eslint-disable-next-line no-array-constructor\r\n    var csvData = new Array();\r\n    csvData.push(\r\n      '\"Sl No\",\"Employee Type\",\"Sub Type\",\"\tHQ\",\"Company\",\"Employee Name\",\"Is Manager\",\"Leave Count\",\"Leave Type\",\"From Date\",\"To Date\",\"Reason\",\"Status\"'\r\n    );\r\n    let ManagerType = \"\";\r\n    let status = \"\";\r\n    ResponseData2.map((item) => {\r\n      if (item.EMPOLYEE_IS_MANAGER === \"1\" || item.EMPOLYEE_IS_MANAGER === 1) {\r\n        ManagerType = \"Manager\";\r\n      } else {\r\n        ManagerType = \"Officer\";\r\n      }\r\n      if (item.LEAVE_ISACTIVE === 0) {\r\n        status = \"Pending\";\r\n      } else if (item.LEAVE_ISACTIVE === 1) {\r\n        status = \"Accepted\";\r\n      } else {\r\n        status = \"Rejected\";\r\n      }\r\n      let idate = new Date(\r\n        new Date(item.LEAVE_FROM_DATE).toISOString().split(\"T\")[0]\r\n      );\r\n      let dateMDY = `${idate.getDate().toString().padStart(2, \"0\")}-${(\r\n        idate.getMonth() + 1\r\n      )\r\n        .toString()\r\n        .padStart(2, \"0\")}-${idate.getFullYear()}`;\r\n\r\n      let idate1 = new Date(\r\n        new Date(item.LEAVE_TO_DATE).toISOString().split(\"T\")[0]\r\n      );\r\n      let dateMDY1 = `${idate1.getDate().toString().padStart(2, \"0\")}-${(\r\n        idate1.getMonth() + 1\r\n      )\r\n        .toString()\r\n        .padStart(2, \"0\")}-${idate1.getFullYear()}`;\r\n      return (\r\n        cnt++,\r\n        csvData.push(\r\n          '\"' +\r\n          cnt +\r\n          '\",\"' +\r\n          item.EMPLOYEE_TYPE_NAME +\r\n          '\",\"' +\r\n          item.EMPLOYEE_SUB_TYPE_NAME +\r\n          '\",\"' +\r\n          item.HQ_NAME +\r\n          '\",\"' +\r\n          item.COMPANY_NAME +\r\n          '\",\"' +\r\n          item.EMPLOYEE_NAME +\r\n          '\",\"' +\r\n          ManagerType +\r\n          '\",\"' +\r\n          item.LeaveCount +\r\n          '\",\"' +\r\n          item.LEAVE_TYPE +\r\n          '\",\"' +\r\n          dateMDY +\r\n          '\",\"' +\r\n          dateMDY1 +\r\n          '\",\"' +\r\n          item.LEAVE_REASON +\r\n          '\",\"' +\r\n          status +\r\n          '\"'\r\n        )\r\n      );\r\n    });\r\n\r\n    const fileName = \"Employee Leaves.csv\";\r\n    const buffer = csvData.join(\"\\n\");\r\n    const blob = new Blob([buffer], {\r\n      type: \"text/csv;charset=utf8;\",\r\n    });\r\n\r\n    //IN IE\r\n    const link = document.createElement(\"a\");\r\n    if (link.download !== undefined) {\r\n      link.setAttribute(\"href\", window.URL.createObjectURL(blob));\r\n      link.setAttribute(\"download\", fileName);\r\n      link.style = \"visibility:hidden\";\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n    } else if (navigator.msSaveBlob) {\r\n      navigator.msSaveBlob(blob, fileName);\r\n    } else {\r\n    }\r\n    document.getElementById(\"divLoading\").className = \"hide\";\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    GetAllEmpLeave();\r\n  }, []);\r\n\r\n  let history = useHistory();\r\n\r\n  return (\r\n    <div id=\"city\">\r\n      <div id=\"divLoading\"> </div>\r\n      <h1 id=\"ccmaster\">Employee Leaves</h1>\r\n      <CRow style={{ marginTop: \"3%\" }}>\r\n        <CCol col=\"12\">\r\n        <CCard style={{ boxShadow: \"0px 0px 1px 1px #959595\" }}>\r\n            <CCardBody>\r\n              <CRow>\r\n                <CCol>\r\n                  <CCard>\r\n                    <CCardHeader>\r\n                      <CRow>\r\n                        <CCol col=\"6\">View All Employee Leaves</CCol>\r\n                        <CCol col=\"6\">\r\n                          <CButton\r\n                            onClick={ToExcel}\r\n                            color=\"primary\"\r\n                            style={{\r\n                              marginTop: \"0%\",\r\n                            }}\r\n                            size=\"sm\"\r\n                            id=\"AddEmp\"\r\n                          >\r\n                            Export To Excel\r\n                          </CButton>\r\n                        </CCol>\r\n                      </CRow>\r\n                    </CCardHeader>\r\n                    <CCardBody>\r\n                      <CDataTable\r\n                        items={ResponseData}\r\n                        fields={fields2}\r\n                        hover\r\n                        striped\r\n                        bordered\r\n                        sorter\r\n                        tableFilter={table}\r\n                        itemsPerPageSelect={items}\r\n                        columnFilterSlot\r\n                        size=\"sm\"\r\n                        itemsPerPage={10}\r\n                        pagination\r\n                        scopedSlots={{\r\n                          \"Leave Count\": (i) => (\r\n                            <td>\r\n                              <CButton\r\n                                onClick={() =>\r\n                                  history.push(\"/EmployeeAllLeaves\", {\r\n                                    data: i,\r\n                                  })\r\n                                }\r\n                              >\r\n                                {i.LeaveCount}\r\n                              </CButton>\r\n                            </td>\r\n                          ),\r\n                        }}\r\n                      />\r\n                    </CCardBody>\r\n                  </CCard>\r\n                </CCol>\r\n              </CRow>\r\n            </CCardBody>\r\n          </CCard>\r\n        </CCol>\r\n      </CRow>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Reports_EmpLeaves;\r\n"],"sourceRoot":""}