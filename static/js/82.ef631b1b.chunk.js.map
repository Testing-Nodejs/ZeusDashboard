{"version":3,"sources":["services/service.js","views/masters/DateFilter.js","views/LeaveManagement/LeaveRequest.js"],"names":["MyApiUrl","ViewImg","DateFilter","date","idate","Date","toISOString","split","getDate","toString","padStart","getMonth","getFullYear","table","placeholder","label","items","values","fields2","key","LeaveRequest","useState","ResponseData","setResponseData","block","setBlock","DelReason","setDelReason","LeavePkid","setLeavePkid","block3","setblock3","LeaveRemarkRes","setLeaveRemarkRes","GetAllLeaveRequest","Swal","mixin","toast","position","showConfirmButton","timer","timerProgressBar","didOpen","addEventListener","stopTimer","resumeTimer","document","getElementById","className","axios","method","url","headers","then","response","data","map","item","manager","EMPOLYEE_IS_MANAGER","EMPLOYEE_NAME","LEAVE_TYPE","catch","error","console","log","React","useEffect","history","useHistory","id","style","marginTop","col","boxShadow","fields","hover","striped","bordered","sorter","tableFilter","itemsPerPageSelect","columnFilterSlot","size","itemsPerPage","pagination","scopedSlots","LEAVE_FROM_DATE","LEAVE_TO_DATE","Attachment","i","href","LEAVE_FILE","target","onClick","push","LeaveCount","Reason","md","color","pkid","LEAVE_PKID","LEAVE_REASON","Action","put","fire","title","icon","confirmButtonText","status","show","onClose","closeButton","padding","class","value","onChange","event","rows","height","fontSize","confirm","obj","LEAVE_REMARKS"],"mappings":"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","file":"static/js/82.ef631b1b.chunk.js","sourcesContent":["// Nodejs Api's\r\n// Local\r\n//  const MyApiUrl = 'http://192.168.1.7:7765/api/';\r\n\r\n//  const ViewImg = 'http://192.168.1.7:7765/';\r\n\r\n// Live\r\n // const MyApiUrl = 'https://ssieducation.in:7765/api/';\r\n\r\n  //const ViewImg = 'https://ssieducation.in:7765/'; \r\n\r\n  const MyApiUrl = 'https://zeusservices.onrender.com/api/';\r\n\r\n  const ViewImg = 'https://zeusservices.onrender.com/'; \r\n\r\nexport {\r\n    MyApiUrl,\r\n    ViewImg,\r\n}\r\n","export default function DateFilter({ date }) {\r\n  let idate = new Date(new Date(date).toISOString().split(\"T\")[0]);\r\n  let dateMDY = `${idate.getDate().toString().padStart(2, \"0\")}-${(\r\n    idate.getMonth() + 1\r\n  )\r\n    .toString()\r\n    .padStart(2, \"0\")}-${idate.getFullYear()}`;\r\n  return dateMDY;\r\n}\r\n","/**\r\n * @author KIMOSABE\r\n * @email Kimosabe@mail.com\r\n * @create date 2021-11-29 12:14:40\r\n * @modify date 2021-12-06 15:20:08\r\n * @desc [description]\r\n */\r\n\r\nimport React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport Swal from \"sweetalert2\";\r\nimport {\r\n  CButton,\r\n  CCard,\r\n  CCardBody,\r\n  CCardHeader,\r\n  CCol,\r\n  CRow,\r\n  CDataTable,\r\n  CModal,\r\n  CModalBody,\r\n  CModalFooter,\r\n  CModalHeader,\r\n  CModalTitle,\r\n  CLink,\r\n  CTextarea,\r\n} from \"@coreui/react\";\r\nimport { MyApiUrl, ViewImg } from \"src/services/service\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport DateFilter from \"../masters/DateFilter\";\r\nimport DeleteSharpIcon from \"@material-ui/icons/DeleteSharp\";\r\nimport \"../../style.css\";\r\nconst table = { placeholder: \"Search here...\", label: \"Search:  \" };\r\nconst items = { label: \"Rows:\", values: [5, 10, 25, 50, 75, 100] };\r\nconst fields2 = [\r\n  { key: \"Action\" },\r\n  { key: \"Employee Name\" },\r\n  { key: \"Is Manager\" },\r\n  { key: \"Leave Count\" },\r\n  { key: \"Leave Type\" },\r\n  { key: \"From Date\" },\r\n  { key: \"To Date\" },\r\n  { key: \"Reason\" },\r\n  { key: \"Attachment\" },\r\n];\r\n\r\nconst LeaveRequest = () => {\r\n  const [ResponseData, setResponseData] = useState([]);\r\n  const [block, setBlock] = useState(false);\r\n  const [DelReason, setDelReason] = useState();\r\n  const [LeavePkid, setLeavePkid] = useState();\r\n  const [block3, setblock3] = useState(false);\r\n  const [LeaveRemarkRes, setLeaveRemarkRes] = useState(\"\");\r\n\r\n  const Toast = Swal.mixin({\r\n    toast: true,\r\n    position: \"top-end\",\r\n    showConfirmButton: false,\r\n    timer: 1500,\r\n    timerProgressBar: true,\r\n    didOpen: (toast) => {\r\n      toast.addEventListener(\"mouseenter\", Swal.stopTimer);\r\n      toast.addEventListener(\"mouseleave\", Swal.resumeTimer);\r\n    },\r\n  });\r\n\r\n  const GetAllLeaveRequest = () => {\r\n    document.getElementById(\"divLoading\").className = \"show\";\r\n    axios({\r\n      method: \"GET\",\r\n      url: MyApiUrl + \"leaves\",\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((response) => {\r\n        const items = response.data.map((item) => {\r\n          let manager = \"\";\r\n          if (item.EMPOLYEE_IS_MANAGER === 1) {\r\n            manager = \"Manager\";\r\n          } else {\r\n            manager = \"Officer\";\r\n          }\r\n          return {\r\n            ...item,\r\n            \"Is Manager\": manager,\r\n            \"Employee Name\": item.EMPLOYEE_NAME,\r\n            \"Leave Type\": item.LEAVE_TYPE,\r\n          };\r\n        });\r\n        setResponseData(items);\r\n        document.getElementById(\"divLoading\").className = \"hide\";\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  const AcceptRequest = (pkid) => {\r\n    document.getElementById(\"divLoading\").className = \"show\";\r\n    axios.put(MyApiUrl + \"acceptleaves/\" + pkid).then((response) => {\r\n      if (response.data === true) {\r\n        Swal.fire({\r\n          title: \"Leave Confirmed!\",\r\n          icon: \"success\",\r\n          confirmButtonText: \"OK\",\r\n        });\r\n        GetAllLeaveRequest();\r\n        document.getElementById(\"divLoading\").className = \"hide\";\r\n      } else {\r\n        Swal.fire({\r\n          title: \"Failed!\",\r\n          icon: \"error\",\r\n          confirmButtonText: \"OK\",\r\n        });\r\n        document.getElementById(\"divLoading\").className = \"hide\";\r\n      }\r\n    });\r\n  };\r\n\r\n  const RejectRequest = (pkid) => {\r\n    setblock3(!block3);\r\n    setLeavePkid(pkid);\r\n  };\r\n\r\n  const ConfirmLeaveReject = () => {\r\n    // eslint-disable-next-line no-restricted-globals\r\n    var res = confirm(\"Are you sure you want to Deny\");\r\n    if (res) {\r\n      document.getElementById(\"divLoading\").className = \"show\";\r\n      var obj = {\r\n        LEAVE_PKID: LeavePkid,\r\n        LEAVE_REMARKS: LeaveRemarkRes,\r\n      }\r\n      axios.put(MyApiUrl + \"rejectleaves/\" + LeavePkid, obj).then((response) => {\r\n        if (response.data === true) {\r\n          Swal.fire({\r\n            title: \"Leave Request Denied!\",\r\n            icon: \"success\",\r\n            confirmButtonText: \"OK\",\r\n          });\r\n          setblock3(!block3);\r\n          setLeaveRemarkRes(\"\");\r\n          GetAllLeaveRequest();\r\n          document.getElementById(\"divLoading\").className = \"hide\";\r\n        } else {\r\n          Swal.fire({\r\n            title: \"Failed!\",\r\n            icon: \"error\",\r\n            confirmButtonText: \"OK\",\r\n          });\r\n          document.getElementById(\"divLoading\").className = \"hide\";\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  const LeaveReason = (pkid) => {\r\n    document.getElementById(\"divLoading\").className = \"show\";\r\n    axios({\r\n      method: \"GET\",\r\n      url: MyApiUrl + \"leavereason/\" + pkid + \"\",\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((response) => {\r\n        setDelReason(response.data[0].LEAVE_REASON);\r\n        document.getElementById(\"divLoading\").className = \"hide\";\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n    setBlock(!block);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    GetAllLeaveRequest();\r\n  }, []);\r\n\r\n  let history = useHistory();\r\n\r\n  return (\r\n    <div id=\"city\">\r\n      <div id=\"divLoading\"> </div>\r\n      <h1 id=\"ccmaster\">Employee Leave Request</h1>\r\n      <CRow style={{ marginTop: \"3%\" }}>\r\n        <CCol col=\"12\">\r\n          <CCard style={{ boxShadow: \"0px 0px 1px 1px #959595\" }}>\r\n            <CCardBody>\r\n              <CRow>\r\n                <CCol>\r\n                  <CCard>\r\n                    <CCardHeader>View Employee Leave Request</CCardHeader>\r\n                    <CCardBody>\r\n                      <CDataTable\r\n                        items={ResponseData}\r\n                        fields={fields2}\r\n                        hover\r\n                        striped\r\n                        bordered\r\n                        sorter\r\n                        tableFilter={table}\r\n                        itemsPerPageSelect={items}\r\n                        columnFilterSlot\r\n                        size=\"sm\"\r\n                        itemsPerPage={10}\r\n                        pagination\r\n                        scopedSlots={{\r\n                          \"From Date\": (item) => (\r\n                            <td>\r\n                              {<DateFilter date={item.LEAVE_FROM_DATE} />}\r\n                            </td>\r\n                          ),\r\n                          \"To Date\": (item) => (\r\n                            <td>{<DateFilter date={item.LEAVE_TO_DATE} />}</td>\r\n                          ),\r\n                          Attachment: (i) => (\r\n                            <td>\r\n                              <CLink\r\n                                href={ViewImg + \"/\" + i.LEAVE_FILE}\r\n                                target=\"_blank\"\r\n                              >\r\n                                {i.LEAVE_FILE}\r\n                              </CLink>\r\n                            </td>\r\n                          ),\r\n                          \"Leave Count\": (i) => (\r\n                            <td>\r\n                              <CButton\r\n                                onClick={() =>\r\n                                  history.push(\"/EmployeeAllLeaves\", {\r\n                                    data: i,\r\n                                  })\r\n                                }\r\n                              >\r\n                                {i.LeaveCount}\r\n                              </CButton>\r\n                            </td>\r\n                          ),\r\n                          Reason: (i) => (\r\n                            <td>\r\n                              <CRow>\r\n                                <CCol md=\"8\">\r\n                                  <CButton\r\n                                    color=\"primary\"\r\n                                    size=\"sm\"\r\n                                    id=\"AddEmp\"\r\n                                    onClick={() => {\r\n                                      LeaveReason(i.LEAVE_PKID);\r\n                                    }}\r\n                                  >\r\n                                    View\r\n                                  </CButton>\r\n                                </CCol>\r\n                              </CRow>\r\n                            </td>\r\n                          ),\r\n                          Action: (i) => (\r\n                            <td>\r\n                              <CButton\r\n                                onClick={() => {\r\n                                  AcceptRequest(i.LEAVE_PKID);\r\n                                }}\r\n                                size=\"sm\"\r\n                                color=\"success\"\r\n                              >\r\n                                Accept\r\n                                {i.status}\r\n                              </CButton>&nbsp;&nbsp;&nbsp;\r\n                              <CButton\r\n                                onClick={() => {\r\n                                  RejectRequest(i.LEAVE_PKID);\r\n                                }}\r\n                                size=\"sm\"\r\n                                color=\"danger\"\r\n                              >\r\n                                Deny\r\n                              </CButton>\r\n                            </td>\r\n                          ),\r\n                        }}\r\n                      />\r\n                    </CCardBody>\r\n                  </CCard>\r\n                </CCol>\r\n              </CRow>\r\n            </CCardBody>\r\n          </CCard>\r\n        </CCol>\r\n      </CRow>\r\n      <CModal show={block} onClose={() => setBlock(!block)} color=\"dark\">\r\n        <CModalHeader closeButton>\r\n          <CModalTitle>Reason</CModalTitle>\r\n        </CModalHeader>\r\n        <CModalBody>\r\n          <p>{DelReason}</p>\r\n        </CModalBody>\r\n        <CModalFooter>\r\n          <CButton color=\"secondary\" onClick={() => setBlock(!block)}>\r\n            Close\r\n          </CButton>\r\n        </CModalFooter>\r\n      </CModal>\r\n      <CModal show={block3} onClose={() => setblock3(!block3)} color=\"dark\">\r\n        <CModalHeader closeButton>\r\n          <CModalTitle>Remark</CModalTitle>\r\n        </CModalHeader>\r\n        <CModalBody>\r\n          <CRow style={{ padding: \"0% 5% 0% 5% !important\" }}>\r\n            <CTextarea\r\n              class=\"form-control\"\r\n              value={LeaveRemarkRes}\r\n              onChange={(event) => {\r\n                setLeaveRemarkRes(event.target.value);\r\n              }}\r\n              id=\"exampleFormControlTextarea1\"\r\n              rows=\"3\"\r\n              style={{ height: \"200px\", fontSize: \"16px\" }}\r\n            ></CTextarea>\r\n          </CRow>\r\n        </CModalBody>\r\n        <CModalFooter>\r\n          <CButton color=\"secondary\" onClick={() => setblock3(!block3)}>\r\n            Close\r\n          </CButton>\r\n          <CButton color=\"secondary\" onClick={ConfirmLeaveReject}>\r\n            Submit\r\n          </CButton>\r\n        </CModalFooter>\r\n      </CModal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LeaveRequest;\r\n"],"sourceRoot":""}